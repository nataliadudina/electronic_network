# Модель сети по продаже электроники

***
Веб-приложение с API-интерфейсом и админ-панелью для управления сетью по продаже электроники
***

## Структура проекта

### Основное приложение проекта - networks
Сеть организована в иерархическую структуру из трех уровней: Завод, Розничная сеть, Индивидуальный предприниматель. 
Каждый уровень может быть поставщиком для других уровней, за исключением Завода, который не имеет поставщика. 
В проекте реализована проверка на корректность данных, чтобы предотвратить ситуации, когда организация поставляет продукцию себе, или когда заводы имеют задолженности. 
Задолженности не могут быть изменены через API.

### Вспомогательное приложение - users
В проекте используется стандартная модель User Django. Для аутентификации реализована авторизация по JWS-токену. 
Права доступа настраиваются таким образом, что доступ к API имеют только активные сотрудники. 
Приложение users может быть расширено для выполнения новых задач.

### Админ-панель
Админ-панель доступна через учетную запись суперпользователя (администратора). 
Здесь можно добавлять сотрудников и управлять их правами доступа через поле "is active". 
В админ-панели реализовано действие "admin action", позволяющее переключать статус активности для нескольких пользователей одновременно.

**Настройки админ-панели для моделей:**

* **Контакты:** настроена фильтрация по городу и стране, а также поиск по организации и пагинация.

* **Продукт:** реализована фильтрация по каналу продаж, а также поиск по названию и пагинация.

* **Узел Сети:** настроены фильтрация по типу организации (завод, розница, ИП) и стране, поиск по названию и городу, а также пагинация.
В списке организаций добавлена ссылка на "поставщика" для удобства.
В "карточке" организации можно посмотреть всю информацию о клиентах, их контактам и продуктах на поставку.

* **Очистка задолженности:** в админ-панели доступно действие "admin action", которое обнуляет задолженность перед поставщиком для выбранных объектов.

Админ-панель располагается по адресу:
- http://127.0.0.1:8000/admin/

REST API реализовано на Python и предоставляет следующие возможности:

- **Операции CRUD для модели Product (продукт)**: Создание, чтение, обновление и удаление продуктов.
- **Операции CRUD для модели Contacts (контакты)**: Создание, чтение, обновление и удаление контактов организаций.
- **Операции CRUD для модели NetworkNode (узел сети)**: Создание, чтение, обновление и удаление организации.

## Установка и запуск проекта

1. Клонирование репозитория: git clone git@github.com:nataliadudina/electronic_network.git
2. Переход в каталог проекта: cd electronic_network
3. Создание файла.env: создайте файл .env в корневой директории проекта и добавьте в него необходимые переменные окружения. 
Пример содержимого файла .env есть в файле .env.sample
4. Сборка и запуск контейнеров: 
***
docker-compose up --build 
***
В процессе запуска контейнера будет автоматически применены миграции, а затем сервер будет запущен на порту 8000
5. Доступ к приложению: после успешного запуска контейнеров приложение будет доступно по адресу http://localhost:8000. 
6. Остановка и удаление контейнеров: docker-compose down 
7. Создайте суперпользователя, используя следующую команду: 
<pre>
docker exec -it app bash
python manage.py csu
</pre>
Убедитесь, что в файле .env прописаны username и password для суперпользователя.
8. В проекте есть фикстуры с тестовыми данными для таблиц базы данных. Для загрузки используйте команду:
<pre>
docker exec -it app bash
python manage.py loaddata networks/fixtures/products_fixtures.json networks/fixtures/сontacts_fixtures.json networks/fixtures/networks_fixtures.json
</pre>

Подробная документация доступна по адресам:

> **http://127.0.0.1:8000/swagger/**
> 
> **http://127.0.0.1:8000/redoc/**

Все контроллеры покрыты тестами. Общее покрытие кода тестами 96%. Отчёт находится в файле **coverage_report.txt**  